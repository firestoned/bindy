# Copyright (c) 2025 Erick Bourgeois, firestoned
# SPDX-License-Identifier: MIT
#
# This file is AUTO-GENERATED from src/crd.rs
# DO NOT EDIT MANUALLY - Run `cargo run --bin crdgen` to regenerate
#
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  name: mxrecords.bindy.firestoned.io
spec:
  group: bindy.firestoned.io
  names:
    categories: []
    kind: MXRecord
    plural: mxrecords
    shortNames:
    - mx
    singular: mxrecord
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - jsonPath: .spec.name
      name: Name
      type: string
    - jsonPath: .spec.ttl
      name: TTL
      type: integer
    - jsonPath: .status.conditions[?(@.type=='Ready')].status
      name: Ready
      type: string
    name: v1beta1
    schema:
      openAPIV3Schema:
        description: MXRecord specifies mail exchange servers for a domain. Lower priority values indicate higher preference for mail delivery.
        properties:
          spec:
            description: |-
              `MXRecord` specifies mail servers for a domain.

              MX (Mail Exchange) records specify the mail servers responsible for accepting email
              for a domain. Lower priority values indicate higher preference.

              # Example

              ```yaml
              apiVersion: bindy.firestoned.io/v1beta1
              kind: MXRecord
              metadata:
                name: mail-example-com
                namespace: dns-system
                labels:
                  zone: example.com
              spec:
                name: "@"
                priority: 10
                mailServer: mail.example.com.
                ttl: 3600
              ```

              Records are associated with `DNSZones` via label selectors.
              The `DNSZone` must have a `recordsFrom` selector that matches this record's labels.
            properties:
              mailServer:
                description: |-
                  Fully qualified domain name of the mail server.

                  Must end with a dot. Example: "mail.example.com."
                type: string
              name:
                description: Record name within the zone. Use "@" for the zone apex.
                type: string
              priority:
                description: |-
                  Priority (preference) of this mail server. Lower values = higher priority.

                  Common values: 0-100. Multiple MX records can exist with different priorities.
                format: int32
                maximum: 65535.0
                minimum: 0.0
                type: integer
              ttl:
                description: Time To Live in seconds.
                format: int32
                maximum: 2147483647.0
                minimum: 0.0
                nullable: true
                type: integer
            required:
            - mailServer
            - name
            - priority
            type: object
          status:
            description: Generic record status
            nullable: true
            properties:
              conditions:
                default: []
                items:
                  description: |-
                    Condition represents an observation of a resource's current state.

                    Conditions are used in status subresources to communicate the state of
                    a resource to users and controllers.
                  properties:
                    lastTransitionTime:
                      description: Last time the condition transitioned from one status to another (RFC3339 format).
                      nullable: true
                      type: string
                    message:
                      description: Human-readable message indicating details about the transition.
                      nullable: true
                      type: string
                    reason:
                      description: Brief CamelCase reason for the condition's last transition.
                      nullable: true
                      type: string
                    status:
                      description: 'Status of the condition: True, False, or Unknown.'
                      type: string
                    type:
                      description: 'Type of condition. Common types include: Ready, Available, Progressing, Degraded, Failed.'
                      type: string
                  required:
                  - status
                  - type
                  type: object
                type: array
              observedGeneration:
                format: int64
                nullable: true
                type: integer
              zone:
                description: |-
                  The FQDN of the zone that owns this record (set by `DNSZone` controller).

                  When a `DNSZone`'s label selector matches this record, the `DNSZone` controller
                  sets this field to the zone's FQDN (e.g., `"example.com"`). The record reconciler
                  uses this to determine which zone to update in BIND9.

                  If this field is empty, the record is not matched by any zone and should not
                  be reconciled into BIND9.
                nullable: true
                type: string
            type: object
        required:
        - spec
        title: MXRecord
        type: object
    served: true
    storage: true
    subresources:
      status: {}
