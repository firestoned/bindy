apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: bindy-admin-role
  labels:
    app.kubernetes.io/name: bindy
    app.kubernetes.io/component: rbac
    app.kubernetes.io/role: admin
  annotations:
    description: "Admin role for destructive operations - DO NOT bind to ServiceAccount"
rules:
  # ADMIN ONLY: Delete permissions for Bindy CRDs
  # This role should be bound to human administrators, NOT the controller ServiceAccount
  # Usage: kubectl create rolebinding ... --clusterrole=bindy-admin-role --user=admin@example.com

  # Bind9Instance - admin delete permission
  - apiGroups: ["bindy.firestoned.io"]
    resources: ["bind9instances"]
    verbs: ["delete", "deletecollection"]

  # Bind9Cluster - admin delete permission
  - apiGroups: ["bindy.firestoned.io"]
    resources: ["bind9clusters"]
    verbs: ["delete", "deletecollection"]

  # ClusterBind9Provider - admin delete permission
  - apiGroups: ["bindy.firestoned.io"]
    resources: ["clusterbind9providers"]
    verbs: ["delete", "deletecollection"]

  # DNSZone - admin delete permission
  - apiGroups: ["bindy.firestoned.io"]
    resources: ["dnszones"]
    verbs: ["delete", "deletecollection"]

  # DNS Records - admin delete permission
  - apiGroups: ["bindy.firestoned.io"]
    resources:
      - "arecords"
      - "aaaarecords"
      - "txtrecords"
      - "cnamerecords"
      - "mxrecords"
      - "nsrecords"
      - "srvrecords"
      - "caarecords"
    verbs: ["delete", "deletecollection"]

  # Kubernetes resources - admin delete permission
  - apiGroups: ["apps"]
    resources: ["deployments"]
    verbs: ["delete"]

  - apiGroups: [""]
    resources: ["services", "configmaps", "serviceaccounts"]
    verbs: ["delete"]

  # Secrets - admin delete permission (CRITICAL: use with extreme caution)
  - apiGroups: [""]
    resources: ["secrets"]
    verbs: ["delete"]
